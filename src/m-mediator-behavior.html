<!--<script src="./store.js"></script>-->

<script>
    window.Morning = window.Morning || {};

    Morning.state = {};
    
    Morning.MediatorBehavior = {
      
      state: Morning.state,

      attached: function() {
        console.log("attached");
      },

      changeTime: function(ts) {
        var date = new Date(ts);
        var timestring = date.toTimeString().split(" ")[0];

        var options = { weekday: 'long', month: 'long', day: 'numeric'};
        var datestring = date.toLocaleDateString('en-US', options);
        
        this.changeTimeString(timestring);
        this.changeDateString(datestring);

        this.state.time = date.getTime();
        // this.onTimeChanged(this.state);
      },

      changeTimeString: function(timestring) {
        this.state.timestring = timestring;
        this.onTimeStringChanged(this.state);
      },

      changeDateString: function(datestring) {
        if (this.state.datestring == datestring) {
          return;
        }

        this.state.datestring = datestring;
        this.onDateStringChanged(this.state);
        this.onDayChanged(this.state);
      },

      onTimeStringChanged: function () {},
      onDateStringChanged: function () {},
      onDayChanged: function () {},
    };
</script>